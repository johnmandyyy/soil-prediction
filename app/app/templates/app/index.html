{% extends "app/layout.html" %}
{% load static %}
{% block content %}

<div id="index">
    <div class="row">

        <p class="lead fw-bold mb-0 pb-0">
            Evaluation Metrics:
        </p>
        <p class="font-weight-light text-muted">Here you can check the
            evaluation
            metrics based on training.</p>
        <div class="col-lg-3">
            <div class="card text-dark bg-light mb-3 mt-3 shadow">
                <center>
                    <div class="card-body">
                        <h5 class="card-title text-primary"><i
                                class="fa-solid fa-bullseye"></i> Accuracy</h5>
                        <h1 class="display-6">[[ reports[0].accuracy ]]%</h1>
                        <p class="card-text">The proportion of total predictions
                            that are correct.</p>
                    </div>
                </center>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="card text-dark bg-light mb-3 mt-3 shadow">
                <center>
                    <div class="card-body">
                        <h5 class="card-title text-secondary"><i
                                class="fa-solid fa-crosshairs"></i>
                            Precision</h5>
                        <h1 class="display-6">[[ reports[0].precision ]]%</h1>
                        <p class="card-text">The proportion of total predictions
                            that are correct.</p>
                    </div>
                </center>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="card text-dark bg-light mb-3 mt-3 shadow">
                <center>
                    <div class="card-body">
                        <h5 class="card-title text-success"><i
                                class="fa-solid fa-bookmark"></i> Recall</h5>
                        <h1 class="display-6">[[ reports[0].recall ]]%</h1>
                        <p class="card-text">The proportion of actual positives
                            that
                            are correctly identified.</p>
                    </div>
                </center>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="card text-dark bg-light mb-3 mt-3 shadow">
                <center>
                    <div class="card-body">
                        <h5 class="card-title"><i
                                class="fa-solid fa-scale-balanced"></i> F1
                            Score</h5>
                        <h1 class="display-6">[[ reports[0].f1_score ]]%</h1>
                        <p class="card-text">The harmonic mean of precision and
                            recall, balancing both metrics.</p>
                    </div>
                </center>
            </div>
        </div>
    </div>

    <div class="row">

        <p class="lead fw-bold mb-0 pb-0">
            Confusion Matrix:
        </p>

        <p class="font-weight-light text-muted">Model's Confusion to Identify
            Correct Classification (TN, FN, FP, TP)</p>

        <div class="col-lg-12 text-center">
            <img src="/media/confusion_matrix.png" class="img-fluid" />
        </div>

    </div>

    <div class="row">

        <p class="lead fw-bold mb-0 pb-0">
            Summmary Card(s)
        </p>

        <div class="col-lg-6">
            <div class="card text-dark bg-light mb-3 mt-3 shadow">
                <center>
                    <div class="card-body">
                        <h5 class="card-title text-primary"><i
                                class="fa-solid fa-bullseye"></i> Total
                            Categories</h5>
                        <h1 class="display-6">3</h1>
                        <p class="card-text">Total Categories of Image(s)</p>
                    </div>
                </center>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="card text-dark bg-light mb-3 mt-3 shadow">
                <center>
                    <div class="card-body">
                        <h5 class="card-title text-secondary"><i
                                class="fa-solid fa-crosshairs"></i>
                            Total Image(s) Trained</h5>
                        <h1 class="display-6">[[ totalImages ]]</h1>
                        <p class="card-text">The proportion of total predictions
                            that are correct.</p>
                    </div>
                </center>
            </div>
        </div>
    </div>

</div>

<script>

    new Vue({
        delimiters: ["[[", "]]"],
        el: "#index",
    
        data: {
            "reports": [],
            "totalImages": 0
        },
        mounted() {
            if (document.querySelector("#index")) {
                console.log("Mounted index page.")
            }
            this.getReports()
            this.getTotalImages()
        },
        methods: {
            async getTotalImages() {
                var result = await axios.get(
                    "/api/get-medias/"
                ).then((response) => {
                console.log(response)
                this.totalImages = response.data.total_images
            })
            .catch((error) => {
                console.log(error);
            });
            },
            async getReports() {
                var result = await axios.get("/api/list-create/reports/")
                this.reports = result.data
            }
        },
    });
    </script>

{% endblock %}
